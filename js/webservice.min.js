(function(e){function i(e){return r+"handler/"+e}function s(t){var n=prompt("please input your CKstyle Invite Code here... \n\n			localStorage can not cross domain, sorry ~~~");return n?(e.localStorage.setItem("ckstyle-invite-code",n),t||S(),n):!1}function o(e){var t=document.createElement("a");return t.href=e,encodeURIComponent(t.href)}function u(e){return document.getElementById(e)}function a(e){return e.replace(/^\s+|\s+$/g,"")}function f(e){return e.length>80&&(e=e.substring(0,80)+"..."),e}function l(e){var t=['<table width="100%" style="text-align:left;"><thead><tr><th width="40%">URL</th>			<th>before</th><th>after</th><th>delta</th><th>% (delta/before)</th><th>Saved Per 10,000,000 PVs</th><th>compressed CSS</th><th>Replace CSS 				<a href="javascript:;" style="color:red;" title="Because compressed CSS is placed in CKstyle server, relative background image url will become INVALID.">(hover here)</a></th></tr></thead><tbody>'],n;for(var r=0,s=e.length;r<s;r++)n=e[r],n.delta=n.before-n.after,t.push('<tr><td><a target="_blank" href="'+n.url+'">'+f(n.url)+"</a></td><td>"+n.before+"</td><td>"+n.after+"</td><td>"+n.delta+"</td><td>"+(n.delta/n.before*100).toFixed(4)+"</td><td>"+(n.delta*2*1e3*1e4/1024/1024/1024).toFixed(4)+" GB"+'</td><td><a target="_blank" href="'+i(n.download)+'">compressed</a></td>'+'<td>					<a href="javascript:;"						onclick="ckstyle.replaceUrl(this, \''+encodeURIComponent(a(n.url))+"', '"+encodeURIComponent(a(n.download))+"')\">Replace CSS</a></td>"+"<tr>");return t.push("</tbody></table>"),t.join("")}function c(){return!1}function h(){var e=[],t=document.getElementsByTagName("link"),n,r=t.length,i,s;for(n=0;n<r;n++){i=t[n];if(i.getAttribute("rel")!="stylesheet")continue;s=i.getAttribute("href");if(!s)continue;if(o(a(s)).indexOf("http")!=0)continue;e.push(o(s))}return e}function p(){var e='<div id="ckstyle-placeholder" style="width:100%;background-color:#EEE;				position:fixed;top:0;right:0;z-index:10000;border:1px solid #000;box-shadow: 1px 1px 10px #000;opacity:0.9;">				<span id="ckstyle-close" style="float:right;margin-right:10px;font-size:20px;margin-top:3px;cursor:pointer;">&times;</span>				<h3 style="padding:5px;margin:0;font-size:16px;line-height:22px;border-bottom:1px solid #000;">CKStyle Service					<a href="https://github.com/wangjeaf/CSSCheckStyle" target="_blank"><img width="15" style="vertical-align:middle" src="https://a248.e.akamai.net/assets.github.com/images/modules/dashboard/octofication.png?d11794be" /></a></h3>				<p id="ckstyle-loading" style="padding:5px;margin:0;">CKstyling <span id="ckstyle-file-count"></span> CSS Files ...</p>				<div id="ckstyle-content" style="padding:5px;display:none;">321321</div>			</div><div id="ckstyle-trigger" style="border:1px solid #000; box-shadow:1px 1px 2px #000;				display:none;top:0;right:0;position:fixed;z-index:10000;background-color:#EEE;padding:5px;cursor:pointer;">CKstyle</div>',t=document.createElement("div");t.innerHTML=e,document.body.appendChild(t)}function d(e){var t=u("ckstyle-placeholder");return u("ckstyle-file-count").innerHTML=e.length,u("ckstyle-close").onclick=function(){this.parentNode.style.display="none",u("ckstyle-trigger").style.display="block"},u("ckstyle-trigger").onclick=function(){this.style.display="none",t.style.display="block"},t}function v(){if(u("ckstyle-placeholder")){var e=u("ckstyle-placeholder").parentNode.parentNode;e.removeChild(u("ckstyle-placeholder").parentNode)}}function m(e,t,n){var r=u("ckstyle-placeholder");t=decodeURIComponent(t),n=i(decodeURIComponent(n));if(e.innerHTML!="Replace CSS"){var s=n;n=t,t=s}r.style.display="none",setTimeout(function(){var i=document.getElementsByTagName("link");for(var s=0,o=i.length;s<o;s++)if(i[s].href==t){i[s].href=n,setTimeout(function(){e.innerHTML!="Replace CSS"?e.innerHTML="Replace CSS":e.innerHTML="&radic; Recover CSS",r.style.display="block"},500);return}r.style.display="block"},500)}function g(e){if(e.status!="ok"){u("ckstyle-loading").innerHTML=e.msg;return}u("ckstyle-loading").style.display="none";var t=u("ckstyle-content");t.innerHTML=l(e.files),t.style.display="block"}function y(){if(e.localStorage)return t=e.localStorage.getItem("ckstyle-invite-code"),t?!0:(t=s(!0),t?!0:!1)}function b(e){var n="ckstyle",i=document.createElement("script");i.async=!0,i.type="text/javascript",i.src=r+"handler/service.php?invitecode="+t+"&ckcallback=ckstyle.ckstyleCallback&optype="+n+"&cssurls="+e.join("__seperator__"),document.body.appendChild(i)}function w(){var e=document.getElementById("ckservice-loading");e&&e.parentNode.removeChild(e)}function E(){u("ckstyle-placeholder")&&v()}function S(e){if(!e&&!y())return;var t=h();E(),p(),d(t),b(t)}var t,n,r="http://www.csscheckstyle.com/";e.ckstyle={},e.ckstyle.replaceUrl=m,e.ckstyle.ckstyleCallback=g,e.ckstyle.showInviteCodeInputer=s,w(),S()})(this);